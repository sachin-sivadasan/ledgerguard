---
title: 'Quick Start'
description: 'Get your first API call working in 5 minutes'
---

## 1. Get Your API Key

<Steps>
  <Step title="Sign in to LedgerGuard">
    Go to [app.ledgerguard.app](https://app.ledgerguard.app) and sign in with your account.
  </Step>
  <Step title="Navigate to API Keys">
    Click **Settings** → **API Keys** in the sidebar.
  </Step>
  <Step title="Create a New Key">
    Click **Create API Key**, give it a name (e.g., "Production Server"), and copy the key.

    <Warning>
      Save your API key securely. It's only shown once and cannot be retrieved later.
    </Warning>
  </Step>
</Steps>

Your API key looks like: `lg_live_abc123xyz...`

## 2. Make Your First Request

Let's check the payment status of a subscription. Replace `YOUR_API_KEY` and the Shopify GID with your actual values.

<CodeGroup>

```bash cURL
curl https://api.ledgerguard.app/v1/subscriptions/gid://shopify/AppSubscription/12345 \
  -H "X-API-Key: YOUR_API_KEY"
```

```javascript Node.js
const response = await fetch(
  'https://api.ledgerguard.app/v1/subscriptions/gid://shopify/AppSubscription/12345',
  {
    headers: {
      'X-API-Key': 'YOUR_API_KEY'
    }
  }
);

const data = await response.json();
console.log(data);
```

```python Python
import requests

response = requests.get(
    'https://api.ledgerguard.app/v1/subscriptions/gid://shopify/AppSubscription/12345',
    headers={'X-API-Key': 'YOUR_API_KEY'}
)

data = response.json()
print(data)
```

```ruby Ruby
require 'net/http'
require 'json'

uri = URI('https://api.ledgerguard.app/v1/subscriptions/gid://shopify/AppSubscription/12345')
request = Net::HTTP::Get.new(uri)
request['X-API-Key'] = 'YOUR_API_KEY'

response = Net::HTTP.start(uri.hostname, uri.port, use_ssl: true) do |http|
  http.request(request)
end

data = JSON.parse(response.body)
puts data
```

```go Go
package main

import (
    "fmt"
    "io"
    "net/http"
)

func main() {
    req, _ := http.NewRequest("GET",
        "https://api.ledgerguard.app/v1/subscriptions/gid://shopify/AppSubscription/12345",
        nil)
    req.Header.Set("X-API-Key", "YOUR_API_KEY")

    client := &http.Client{}
    resp, _ := client.Do(req)
    defer resp.Body.Close()

    body, _ := io.ReadAll(resp.Body)
    fmt.Println(string(body))
}
```

```php PHP
<?php

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'https://api.ledgerguard.app/v1/subscriptions/gid://shopify/AppSubscription/12345');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, [
    'X-API-Key: YOUR_API_KEY'
]);

$response = curl_exec($ch);
curl_close($ch);

$data = json_decode($response, true);
print_r($data);
```

</CodeGroup>

## 3. Understand the Response

```json
{
  "subscriptionId": "gid://shopify/AppSubscription/12345",
  "myshopifyDomain": "cool-store.myshopify.com",
  "shopName": "Cool Store",
  "planName": "Pro Plan",
  "riskState": "SAFE",
  "isPaidCurrentCycle": true,
  "monthsOverdue": 0,
  "lastSuccessfulChargeDate": "2024-02-15T10:30:00Z",
  "expectedNextChargeDate": "2024-03-15T10:30:00Z",
  "status": "ACTIVE"
}
```

<ParamField body="riskState" type="enum" required>
  Payment risk classification:
  - `SAFE` - Paid and current
  - `ONE_CYCLE_MISSED` - 31-60 days overdue
  - `TWO_CYCLES_MISSED` - 61-90 days overdue
  - `CHURNED` - >90 days overdue
</ParamField>

<ParamField body="isPaidCurrentCycle" type="boolean" required>
  `true` if the subscription is paid for the current billing period
</ParamField>

## 4. Use It In Your App

Here's a common pattern — gating premium features based on payment status:

<CodeGroup>

```javascript Node.js (Express)
app.get('/api/premium-feature', async (req, res) => {
  const shopifyGid = req.shop.subscriptionGid;

  const response = await fetch(
    `https://api.ledgerguard.app/v1/subscriptions/${encodeURIComponent(shopifyGid)}`,
    { headers: { 'X-API-Key': process.env.LEDGERGUARD_API_KEY } }
  );

  const { isPaidCurrentCycle, riskState } = await response.json();

  if (!isPaidCurrentCycle) {
    return res.status(402).json({
      error: 'Payment required',
      riskState
    });
  }

  // Proceed with premium feature
  res.json({ data: 'Premium content here' });
});
```

```python Python (Flask)
@app.route('/api/premium-feature')
def premium_feature():
    shopify_gid = current_shop.subscription_gid

    response = requests.get(
        f'https://api.ledgerguard.app/v1/subscriptions/{quote(shopify_gid)}',
        headers={'X-API-Key': os.environ['LEDGERGUARD_API_KEY']}
    )

    data = response.json()

    if not data['isPaidCurrentCycle']:
        return jsonify({
            'error': 'Payment required',
            'riskState': data['riskState']
        }), 402

    # Proceed with premium feature
    return jsonify({'data': 'Premium content here'})
```

```ruby Ruby (Rails)
class PremiumController < ApplicationController
  def feature
    shopify_gid = current_shop.subscription_gid

    response = HTTP.headers('X-API-Key' => ENV['LEDGERGUARD_API_KEY'])
                   .get("https://api.ledgerguard.app/v1/subscriptions/#{CGI.escape(shopify_gid)}")

    data = response.parse

    unless data['isPaidCurrentCycle']
      return render json: {
        error: 'Payment required',
        riskState: data['riskState']
      }, status: :payment_required
    end

    render json: { data: 'Premium content here' }
  end
end
```

</CodeGroup>

## Next Steps

<CardGroup cols={2}>
  <Card
    title="Authentication Deep Dive"
    icon="key"
    href="/authentication"
  >
    Learn about API key management and security
  </Card>
  <Card
    title="Risk States Explained"
    icon="shield-halved"
    href="/concepts/risk-states"
  >
    Understand how we classify payment risk
  </Card>
  <Card
    title="Batch Lookups"
    icon="layer-group"
    href="/api-reference/subscriptions/batch"
  >
    Query multiple subscriptions at once
  </Card>
  <Card
    title="GraphQL API"
    icon="diagram-project"
    href="/graphql/overview"
  >
    Use GraphQL for flexible queries
  </Card>
</CardGroup>
